
<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=1024, user-scalable=no">

<title>Sheaves in Lean - Lean Together 2019</title>

<link rel="stylesheet" media="screen" href="css/reset.css">
<link rel="stylesheet" media="screen" href="css/fira_code.css">
<link rel="stylesheet" media="screen" href="css/pygments.css">
<link rel="stylesheet" media="screen" href="css/generic.css">
<link rel="stylesheet" media="screen" href="css/special.css">

<link rel="stylesheet" media="screen" href="css/stack.v0.css">

<section id="titleslide">
	<h1>Sheaves in Lean</h1>
<footer><span id="wip">[work in progress]</span>
	<span id="author"><em>by</em> &emsp; Johan Commelin</span></footer>
</section>

<section>
<img src="sheaf.jpg" class="slide" id="sheaf-pic" />
<footer><span class="credit smaller">
	(Image source:
	<a href="https://clipground.com/images/barley-clipart-20.jpg">
	https://clipground.com/images/barley-clipart-20.jpg</a>)
</span></footer>
</section>

<section>
<h2>What is a sheaf?</h2>
<p>Canonical example:
If <code>X</code> is a topological space,
then continuous functions
<code class="highlight">
	<span class="n">X</span>
	<span class="bp">‚Üí</span>
	<span class="n">‚Ñù</span>
</code>
form a sheaf.

<p>Crucial property: functions glue uniquely
</section>

<section>
<h2>A first definition</h2>
<p>Let
<code>X</code>
be a topological space.

<p>A <em>presheaf</em> <code>F</code>
is a rule that assigns
<ul>
<li>to every open <code>U ‚äÜ X</code> a set <code class="highlight"><span class="n">F</span><span class="o">(</span><span class="n">U</span><span class="o">)</span></code></li>
<li>to every inclusion of opens <code>U ‚äÜ V</code><br/>
	a map
	<code class="highlight">
		<span class="n">r_UV</span> <span class="o">:</span> <span class="n">F</span><span class="o">(</span><span class="n">V</span><span class="o">)</span> <span class="bp">‚Üí</span> <span class="n">F</span><span class="o">(</span><span class="n">U</span><span class="o">)</span>
	</code></li>
</ul>
<p>such that
<ul>
<li>for all <code>U</code>, the map <code>r_UU</code> is <code>id</code> on <code class="highlight"><span class="n">F</span><span class="o">(</span><span class="n">U</span><span class="o">)</span></code></li>
<li>if <code>U ‚äÜ V ‚äÜ W</code>, then
<code class="highlight"><span class="n">r_UV</span> <span class="err">‚àò</span> <span class="n">r_VW</span> <span class="bp">=</span> <span class="n">r_UW</span></code>.</li>
</ul>
</section>

<section>
<h2>Say again?</h2>
<p>Note that <code class="highlight"><span class="n">opens</span><span class="o">(</span><span class="n">X</span><span class="o">)</span></code>
is a lattice,<br/>
hence a category.

<p>A presheaf on <code>X</code> is exactly a functor
<div class="highlight"><pre><span></span><span class="n">opens</span><span class="o">(</span><span class="n">X</span><span class="o">)</span><span class="err">·µí·µñ</span> <span class="err">‚•§</span> <span class="n">Set</span>
</pre></div>
</section>

<section id="categories">
		<h2>Categories in Lean</h2>
		<div class="tiny">
		<div class="highlight"><pre><span></span><span class="n">class</span> <span class="n">category</span> <span class="o">(</span><span class="n">obj</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u</span> <span class="o">(</span><span class="n">v</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">hom</span>      <span class="o">:</span> <span class="n">obj</span> <span class="bp">‚Üí</span> <span class="n">obj</span> <span class="bp">‚Üí</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span>
<span class="o">(</span><span class="n">id</span>       <span class="o">:</span> <span class="bp">Œ†</span> <span class="n">X</span> <span class="o">:</span> <span class="n">obj</span><span class="o">,</span> <span class="n">hom</span> <span class="n">X</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">comp</span>     <span class="o">:</span> <span class="bp">Œ†</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">obj</span><span class="o">},</span> <span class="n">hom</span> <span class="n">X</span> <span class="n">Y</span> <span class="bp">‚Üí</span> <span class="n">hom</span> <span class="n">Y</span> <span class="n">Z</span> <span class="bp">‚Üí</span> <span class="n">hom</span> <span class="n">X</span> <span class="n">Z</span><span class="o">)</span>
<span class="o">(</span><span class="n">id_comp&#39;</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">obj</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span> <span class="n">comp</span> <span class="o">(</span><span class="n">id</span> <span class="n">X</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>
<span class="o">(</span><span class="n">comp_id&#39;</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">obj</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span> <span class="n">comp</span> <span class="n">f</span> <span class="o">(</span><span class="n">id</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc&#39;</span>   <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="o">{</span><span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">obj</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">hom</span> <span class="n">W</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span>
            <span class="n">comp</span> <span class="o">(</span><span class="n">comp</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">comp</span> <span class="n">f</span> <span class="o">(</span><span class="n">comp</span> <span class="n">g</span> <span class="n">h</span><span class="o">)</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>

<span class="kn">notation</span> <span class="bp">`</span><span class="mi">ùüô</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">category</span><span class="bp">.</span><span class="n">id</span> <span class="c1">-- type as \b1</span>
<span class="kn">infixr</span> <span class="bp">`</span> <span class="err">‚â´</span> <span class="bp">`</span><span class="o">:</span><span class="mi">80</span> <span class="o">:=</span> <span class="n">category</span><span class="bp">.</span><span class="n">comp</span> <span class="c1">-- type as \gg</span>
<span class="kn">infixr</span> <span class="bp">`</span> <span class="err">‚ü∂</span> <span class="bp">`</span><span class="o">:</span><span class="mi">10</span> <span class="o">:=</span> <span class="n">category</span><span class="bp">.</span><span class="n">hom</span> <span class="c1">-- type as \h</span>
</pre></div>
		</div>
		<!-- <div class="anim-attribute slide" data-what=".appear" data-attr="color:#f00"></div> -->
		<!-- <div class="slide"></div> -->
		<span class="credit">(by Scott Morrison)</span>
		</section>

		<!-- <script> -->
		<!-- 	$('#categories') -->
		<!-- 	.find('span.n:contains("obviously")') -->
		<!-- 	.each(function(idx, elem) { -->
		<!-- 		$(elem).addClass("appear"); -->
		<!-- 	}); -->
		<!-- </script> -->

<section>
<h2>So, what is a sheaf?</h2>
<p>Let <code>U_i ‚äÜ X</code> be open sets that cover <code>U ‚äÜ X</code>.</p>
<p>Consider the following set</p>
<div class="small">
<div class="highlight"><pre><span></span><span class="n">F&#39;</span><span class="o">(</span><span class="n">U</span><span class="o">)</span> <span class="bp">=</span> <span class="o">{</span> <span class="n">s</span> <span class="err">‚àà</span> <span class="bp">Œ†_</span><span class="n">i</span> <span class="n">F</span><span class="o">(</span><span class="n">U_i</span><span class="o">)</span> <span class="bp">|</span> <span class="n">r</span><span class="o">(</span><span class="n">s_i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span><span class="o">(</span><span class="n">s_j</span><span class="o">),</span> <span class="bp">‚àÄ</span> <span class="n">i</span><span class="o">,</span><span class="n">j</span> <span class="o">}</span>
</pre></div>
</div>
<p>There is a canonical map
<code class="highlight">
	<span class="n"><span class="n">F</span><span class="o">(</span><span class="n">U</span><span class="o">)</span> <span class="bp">‚Üí</span> <span class="n">F'</span><span class="o">(</span><span class="n">U</span><span class="o">)</span>
</code>
</p>
<p>A presheaf <code>F</code> is called a <em>sheaf</em>
	if this canonical map is bijective for every <code>U ‚äÜ X</code>.
</section>

<section>
<h2>Remarks</h2>
<p>Sometimes we want sheaves,<br/>
	but don't have a good topology.</p>

<p>Solution:
	Put topologies on categories.</p>

<p>Famous example: &eacute;tale topology</p>
</section>


<script src="js/d3.v3.min.js"></script>
<script src="js/quack.v1.js"></script>

<script> var myquack = quack(); </script>
